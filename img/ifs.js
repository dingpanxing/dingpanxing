!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c){"string"!=typeof b&&(b=JSON.stringify(b)),a.postMessage(b,c)}function f(a,b){try{localStorage.setItem(a,JSON.stringify(b))}catch(c){}}function g(a){var b=localStorage.getItem(a);try{return JSON.parse(b)}catch(c){if("SyntaxError"!==c.name)throw c;f(a,b)}return b}function h(a,b,c){f(a.jId+"."+b,c)}function i(a,b){return g(a.jId+"."+b)}function j(a,b){localStorage.removeItem(a.jId+"."+b)}function k(a){var b=new RegExp("^"+a+"\\.");return Object.keys(localStorage).filter(function(a){return b.test(a)}).reduce(function(a,c){return a[c.replace(b,"")]=g(c),a},{})}function l(a,b){var c,d,e={},f=new RegExp("^"+b);for(c in a)f.test(c)&&(d=c.replace(f,""),e[d]=a[c]);return e}function m(a,b){var c=new RegExp("^"+b.sessionId+"\\."),d=b.sessionId!==a.sId;return d&&(h(a,"sessionId",a.sId),Object.keys(b).filter(function(a){return c.test(a)}).forEach(function(b){return j(a,b)})),d}function n(a,b){var c,d=l(b,b.sessionId+"\\.");b.sessionId!==a.sId&&(d={}),c={id:a.fId,messageBody:d},e(window.parent,c,a.pUrl)}function o(a,b){var c=new RegExp("^"+a.jId+"\\.");"storage"===b.type&&c.test(b.key)&&n(a,k(a.jId))}function p(a,b,c){var d=b.value,e=i(a,"sessionId"),f=e===c;f&&b.hasOwnProperty("value")&&b.hasOwnProperty("key")&&h(a,c+"."+b.key,d)}function q(a,b){var c,d,e;try{c=JSON.parse(b.data)||{}}catch(f){c={}}switch(c.command){case s:a.sId=c.sessionId,d=k(a.jId),e=m(a,d),e&&(d=k(a.jId)),n(a,d);break;case t:p(a,c,a.sId);break;case u:c.hasOwnProperty("key")&&j(a,a.sId+"."+c.key)}}var r=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),s=1,t=2,u=3,v=function(){function a(b,c){d(this,a),this.fId=c,this.jId=b,this.pUrl=document.referrer.replace(/^([a-z]*:\/\/[^\/]+).*$/,"$1")||"*"}return r(a,[{key:"init",value:function(){var a=this,b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return window.localStorage};try{b()}catch(c){return}window.addEventListener("message",function(b){return q(a,b)},!1),window.addEventListener("storage",function(b){return o(a,b)},!1),e(window.parent,{id:this.fId,messageBody:"ready"},this.pUrl)}}]),a}();b.exports=v},{}],2:[function(a,b,c){"use strict";function d(a){var b=window.location.search.match(new RegExp("[?&]"+a+"=([^&]*)(&?)","i"));return b?decodeURIComponent(b[1]):b}var e=a("./StorageCommunicator"),f=new e(d("journeyId"),d("iframeId"));f.init()},{"./StorageCommunicator":1}]},{},[2]);